# ============================================================================
# GitHub Copilot PR Reviewer - Caller Workflow
# ============================================================================
# This is a lightweight caller workflow that invokes the master workflow
# from the central GHES_CodingAgent repository.
#
# Benefits:
# - No scripts folder needed in this repository
# - Automatic updates when master workflow is improved
# - Consistent behavior across all repositories
#
# Prerequisites:
# - GH_TOKEN secret: Classic PAT with repo and workflow scopes
# - COPILOT_TOKEN secret: Token for GitHub Copilot API access
# - CONTEXT7_API_KEY secret (optional): API key for Context7 service
# ============================================================================

name: ðŸ¤– Copilot PR Reviewer

on:
  pull_request:
    types: [labeled]
    branches:
      - main
      - develop
      - feature/*

jobs:
  review:
    # Only run when the 'copilot' label is added
    if: github.event.label.name == 'copilot'
    
    # Call the master workflow from the central repository
    # Replace <org> with your GHES organization name
    uses: ghes-test/GHES_CodingAgent/.github/workflows/copilot-reviewer-master.yml@main
    
    # Pass all secrets to the called workflow
    secrets: inherit
